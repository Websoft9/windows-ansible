(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{195:function(t,v,a){"use strict";a.r(v);var _=a(0),e=Object(_.a)({},function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"迁移网站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#迁移网站","aria-hidden":"true"}},[t._v("#")]),t._v(" 迁移网站")]),t._v(" "),a("p",[t._v("迁移网站就是将"),a("strong",[t._v("网站数据")]),t._v("移动到新的位置，然后通过配置，保证移动后可正常访问。")]),t._v(" "),a("p",[t._v("迁移是需要谨慎对待的操作，迁移之前需要清楚的明白如下要点：")]),t._v(" "),a("ul",[a("li",[t._v("被移动的网站数据对象：网站源码文件和数据库数据文件")]),t._v(" "),a("li",[t._v("目的地位置：服务器目录之间转移（本地）和转移到外部服务器（外部）")])]),t._v(" "),a("p",[t._v("被迁移对象和目的地位置的组合，形成了多种多样的迁移场景。下面详细说明最常见的迁移场景：")]),t._v(" "),a("h2",{attrs:{id:"迁移网站源码（本地）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#迁移网站源码（本地）","aria-hidden":"true"}},[t._v("#")]),t._v(" 迁移网站源码（本地）")]),t._v(" "),a("p",[t._v("以将原目录 "),a("em",[t._v("C:\\websoft9\\wampserver\\www")]),t._v(" 下的 "),a("strong",[t._v("mysite1")]),t._v(" 迁移到 "),a("em",[t._v("d:\\www")]),t._v(" 目录下为例，具体步骤如下：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("使用 "),a("strong",[t._v("远程桌面")]),t._v(" 连接服务器，停止 "),a("router-link",{attrs:{to:"/zh/admin-services.html#apache"}},[t._v("Apache 服务")])],1)]),t._v(" "),a("li",[a("p",[t._v("将 "),a("em",[a("strong",[t._v("mysite1")])]),t._v(" 文件夹整体拷贝到目标位置 "),a("em",[t._v("d:\\www")])])]),t._v(" "),a("li",[a("p",[t._v("修改 "),a("router-link",{attrs:{to:"/zh/stack-components.html#apache"}},[t._v("虚拟主机配置文件")]),t._v(" 中 mysite1 这个网站对应的 VirtualHost 配置段 DocumentRoot, Directory 项的值，并保存它")],1),t._v(" "),a("p",[t._v("原地址：C:\\websoft9\\wampserver\\www\\mysite1"),a("br"),t._v("\n目标地址：d:\\www\\mysite1")])]),t._v(" "),a("li",[a("p",[t._v("重启 "),a("router-link",{attrs:{to:"/zh/admin-services.html#apache"}},[t._v("Apache 服务")])],1)]),t._v(" "),a("li",[a("p",[t._v("测试迁移后的结果，成功后可以删除原来的 "),a("em",[t._v("mysite1")]),t._v(" 文件夹")])])]),t._v(" "),a("h2",{attrs:{id:"迁移数据库文件（本地）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#迁移数据库文件（本地）","aria-hidden":"true"}},[t._v("#")]),t._v(" 迁移数据库文件（本地）")]),t._v(" "),a("p",[t._v("没有特殊情况，我们不建议迁移数据库文件到服务器上另外一个目录，毕竟主流的云厂商磁盘均可扩容。")]),t._v(" "),a("ol",[a("li",[t._v("停止MySQL服务")]),t._v(" "),a("li",[t._v("将 C:\\websoft9\\wampserver\\bin\\mysql\\data 下所有文件拷贝到新目录，例如：D:\\data")]),t._v(" "),a("li",[t._v("修改 "),a("router-link",{attrs:{to:"/zh/stack-components.html#mysql"}},[t._v("数据库配置文件")]),t._v(" 文件中数据存放的路径，范例参考："),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('datadir="C:\\websoft9\\wampserver\\bin\\mysql\\data"\nlog-error="C:\\websoft9\\wampserver\\bin\\mysql\\data\\mysqld.log"\n    \n修改为：\n\ndatadir="D:\\data"\nlog-error="D:\\data\\mysqld.log"\n')])])])],1),t._v(" "),a("li",[t._v("重启MySQL服务")])]),t._v(" "),a("h2",{attrs:{id:"迁移到外部服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#迁移到外部服务器","aria-hidden":"true"}},[t._v("#")]),t._v(" 迁移到外部服务器")]),t._v(" "),a("p",[t._v("网站从一台服务器（原服务器）迁移到另外一台服务器（目的服务器）是一个系统工程，基本步骤如下：")]),t._v(" "),a("ol",[a("li",[t._v("通过云控制台，在目的服务器上"),a("router-link",{attrs:{to:"/zh/stack-deployment.html"}},[t._v("部署")]),t._v("参数一致的 WampServer 镜像。")],1),t._v(" "),a("li",[t._v("将原服务器上的网站源文件"),a("strong",[t._v("转移到")]),t._v("目的服务器。")]),t._v(" "),a("li",[t._v("通过 phpMyAdmin "),a("strong",[t._v("导出")]),t._v("原服务器上的数据库，然后在目的服务器上"),a("strong",[t._v("导入")]),t._v("数据库。")]),t._v(" "),a("li",[t._v("把原服务器上的 "),a("router-link",{attrs:{to:"/zh/stack-components.html#apache"}},[t._v("虚拟主机配置文件")]),t._v(" 配置文件内容，完整拷贝到目的服务器的 "),a("router-link",{attrs:{to:"/zh/stack-components.html#apache"}},[t._v("虚拟主机配置文件")]),t._v(" 中，保存之。")],1),t._v(" "),a("li",[t._v("重启 Apache 服务。")]),t._v(" "),a("li",[t._v("解析域名到目的服务器，等待域名解析生效。")]),t._v(" "),a("li",[t._v("通过域名访问网站，测试可用性。")]),t._v(" "),a("li",[t._v("正式发布。")])]),t._v(" "),a("p",[t._v("如果一台服务器上有多个网站需要迁移，建议逐个迁移")])])},[],!1,null,null,null);v.default=e.exports}}]);